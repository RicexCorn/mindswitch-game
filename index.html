<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MindSwitch</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Auth Buttons (Top Right) -->
    <div id="authButtonsContainer">
        <!-- When NOT logged in -->
        <div id="guestButtons" class="hidden">
            <button id="signupBtn" class="auth-top-btn signup-btn">Sign Up</button>
            <button id="loginTopBtn" class="auth-top-btn login-btn">Log In</button>
        </div>
        
        <!-- When logged in -->
        <div id="userButton" class="hidden">
            <button id="usernameBtn" class="auth-top-btn username-btn">
                <span id="usernameDisplay"></span>
            </button>
        </div>
    </div>

    <!-- Leaderboard Button (Top Left) -->
    <div id="leaderboardButtonContainer">
        <button id="leaderboardBtn" class="leaderboard-top-btn">
            <span class="trophy-icon">üèÜ</span>
            <span>Leaderboard</span>
        </button>
    </div>

    <div id="game-container">
        <div class="lane-divider left-divider"></div>   
        <div class="lane-divider right-divider"></div>

        <div id="freeze-overlay" class="freeze-overlay hidden"></div>

        <div id="start-screen" class="screen">
            <h1 class="brand-title">MindSwitch</h1>
            <p class="brand-subtitle">‡∏à‡∏î‡∏à‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏ß‡πâ!</p>
            <div class="instruction-box">
                <p><b>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô:</b>‡πÅ‡∏¢‡∏Å object ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏è ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏è‡∏ó‡∏¥‡πâ‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á</p>
                <p><b>‡∏Å‡∏é: </b> [‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö 1] (‡πÅ‡∏¢‡∏Å‡πÑ‡∏õ‡∏ä‡πà‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢) | [‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏é 2] (‡πÅ‡∏¢‡∏Å‡πÑ‡∏õ‡∏ä‡πà‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤)</p>
                <p><b>score: </b> ‚úÖ+5  ‚ùå-2</p>
                <p><b>‡∏õ‡∏•. </b>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏é‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô object ‡∏Ç‡∏≠‡∏á‡∏Å‡∏é‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ</p>
            </div>
            <button id="start-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        </div>

        <div id="ui-layer">
            <div class="stat-box">
                <div class="stat-label">SCORE</div>
                <span id="score-val">0</span>
            </div>
            <div id="rule-wrapper">
                <div id="rule-display">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß...</div>
                <div id="rule-warning-bar"></div>
            </div>
            <div class="stat-box">
                <div class="stat-label">TIME</div>
                <span id="time-val">150</span>
            </div>
        </div>

        <div id="alert-text">‚ö†Ô∏è</div>

        <div id="play-area">
            <div class="gravity-well gravity-left"></div>
            <div class="gravity-well gravity-center trash"></div>
            <div class="gravity-well gravity-right"></div>
            
            <div class="zone-indicator zone-left">
                <span class="zone-text text-valid">‡∏ã‡πâ‡∏≤‡∏¢</span>
                <div class="arrow-down arrow-valid"></div>
            </div>
            
            <div class="zone-indicator zone-center">
                <span class="zone-text text-trash">‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞ (+2)</span>
                <div class="arrow-down arrow-trash"></div>
            </div>

            <div class="zone-indicator zone-right">
                <span class="zone-text text-valid">‡∏Ç‡∏ß‡∏≤</span>
                <div class="arrow-down arrow-valid"></div>
            </div>
        </div>

        <div id="end-screen" class="screen hidden">
            <h1 class="end-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h1>
            <div class="result-container">
                <div class="result-item score">
                    <span id="res-score">0</span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </div>
                <div class="result-item accuracy">
                    <span id="res-acc">0%</span>‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
                </div>
            </div>
            <button id="restart-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>

        <div id="leaderboard-screen" class="screen hidden">
            <button id="backFromLeaderboard" class="back-button">‡∏Å‡∏•‡∏±‡∏ö</button>
            <h1 class="leaderboard-title">LEADERBOARD</h1>
            <div id="leaderboardContent" class="leaderboard-content">
                <div class="loading-spinner">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
            </div>
        </div>
    </div>

    <!-- Auth Overlay -->
    <div id="authOverlay" class="auth-overlay hidden">
        <div class="auth-modal">
            <!-- Sign Up Modal -->
            <div id="signupModal" class="auth-content hidden">
                <div class="auth-header">
                    <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</h2>
                    <button class="close-modal" data-close="signup">√ó</button>
                </div>
                
                <div class="auth-body">
                    <div class="input-group">
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="signupUsername" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
                    </div>
                    <div class="input-group">
                        <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="signupPassword" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                    </div>
                    
                    <button id="registerBtn" class="auth-submit-btn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    
                    <div class="auth-footer">
                        <span>‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? </span>
                        <a href="#" id="switchToLogin">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
                    </div>
                </div>
            </div>

            <!-- Login Modal -->
            <div id="loginModal" class="auth-content hidden">
                <div class="auth-header">
                    <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                    <button class="close-modal" data-close="login">√ó</button>
                </div>
                
                <div class="auth-body">
                    <div class="input-group">
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="loginUsername" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
                    </div>
                    <div class="input-group">
                        <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="loginPassword" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                    </div>
                    
                    <button id="loginBtn" class="auth-submit-btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                    
                    <div class="auth-footer">
                        <span>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? </span>
                        <a href="#" id="switchToSignup">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
                    </div>
                </div>
            </div>

            <!-- Profile Modal -->
            <div id="profileModal" class="auth-content hidden">
                <div class="auth-header">
                    <h2>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h2>
                    <button class="close-modal" data-close="profile">√ó</button>
                </div>
                
                <div class="auth-body">
                    <div class="profile-info">
                        <div class="profile-avatar">
                            <span id="profileInitial">U</span>
                        </div>
                        <h3 id="profileUsername">Username</h3>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="profileGames">0</div>
                            <div class="stat-label">‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="profileBestScore">0</div>
                            <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="profileAvgAcc">0%</div>
                            <div class="stat-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
                        </div>
                    </div>
                    
                    <button id="logoutBtn" class="auth-submit-btn logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="script.js"></script>
</body>
</html>